<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>хРОхП░чобчРЖ - Cybar</title>
    <link rel="stylesheet" href="/style.css"> <!-- Link to global styles -->
    <!-- Add specific admin styles if needed -->
    <link rel="stylesheet" href="admin.css">
    <!-- Include Chart.js library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <header>
        <h1>хРОхП░чобчРЖ</h1>
        <div id="user-status">
            <!-- Status loaded by global.js -->
            <a href="/auth/login/">чЩ╗х╜Х</a> | <a href="/auth/register/">ц│ихЖМ</a>
        </div>
    </header>

    <nav>
        <a href="/" class="back-link">ш┐ФхЫЮф╕╗шПЬхНХ</a>
    </nav>

    <main>
        <section id="admin-dashboard">
            <h2>
                ф╗кшбичЫШ
                <button id="refresh-admin-data-btn" class="refresh-btn" title="хИ╖цЦ░цХ░цНо">ЁЯФД</button> <!-- Add Refresh Button -->
            </h2>

            <!-- Statistics Section -->
            <div class="admin-section" id="stats-section">
                <h3>ч╗ЯшобцХ░цНо</h3>
                <div id="admin-stats">хКаш╜╜ф╕н...</div> <!-- General stats loading/error message -->
                <ul>
                    <li>цА╗щЕНцЦ╣цХ░: <span id="stat-total-recipes">N/A</span></li>
                    <li>цА╗чФицИ╖цХ░: <span id="stat-total-users">N/A</span></li>
                </ul>

                <!-- Specific Page Visits Chart -->
                <h4>ф╕╗шжБщб╡щЭвшо┐щЧоч╗Яшоб</h4>
                <div class="chart-container" style="position: relative; height:40vh; width:80vw; max-width: 600px; margin: 20px auto;">
                    <canvas id="specificPageVisitsChart"></canvas>
                </div>

                <!-- REMOVED Page Visits Table -->
                <!--
                <h4>щб╡щЭвшо┐щЧоч╗Яшоб</h4>
                <div class="table-container">
                    <table id="page-visits-table">
                        <thead>
                            <tr>
                                <th>щб╡щЭвш╖пх╛Д</th>
                                <th>шо┐щЧоцмбцХ░</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Data will be populated by JS -->
                            <tr><td colspan="2">цнгхЬихКаш╜╜...</td></tr>
                        </tbody>
                    </table>
                </div>
                -->

                <!-- REMOVED Top Visited Recipes Table -->
                <!--
                <h4 style="margin-top: 30px;">шо┐щЧоцЬАхдЪчЪДщЕНцЦ╣ Top 3</h4>
                <div class="table-container">
                    <table id="top-visited-table">
                        <thead>
                            <tr>
                                <th>щЕНцЦ╣хРНчз░</th>
                                <th>шо┐щЧоцмбцХ░</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Data will be populated by JS -->
                             <tr><td colspan="2">цнгхЬихКаш╜╜...</td></tr>
                        </tbody>
                    </table>
                </div>
                -->

                <!-- REMOVED Chart Containers -->
                <!--
                <div class="chart-container" style="position: relative; height:40vh; width:80vw; max-width: 600px; margin: 20px auto;">
                     <canvas id="pageVisitsChart"></canvas>
                </div>
                <div class="chart-container" style="position: relative; height:30vh; width:80vw; max-width: 500px; margin: 30px auto;">
                     <canvas id="topVisitedChart"></canvas>
                </div>
                -->
            </div>

            <!-- Recipe Management Section -->
            <div class="admin-section" id="recipes-management-section">
                <h3>щЕНцЦ╣чобчРЖ</h3>
                <p id="admin-message" class="message"></p> <!-- Status/Error messages -->
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>хРНчз░</th>
                                <th>цУНф╜Ь</th>
                            </tr>
                        </thead>
                        <tbody id="admin-recipe-list">
                            <!-- Recipe rows will be loaded here by admin.js -->
                            <tr><td colspan="3">цнгхЬихКаш╜╜щЕНцЦ╣...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- User Management Section -->
            <div class="admin-section" id="users-management-section">
                <h3>чФицИ╖чобчРЖ</h3>
                <p id="admin-user-message" class="message"></p> <!-- Status/Error messages for users -->
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>чФицИ╖ ID</th>
                                <th>чФицИ╖хРН</th>
                                <th>шзТшЙ▓</th>
                                <th>цУНф╜Ь</th>
                            </tr>
                        </thead>
                        <tbody id="admin-user-list">
                            <!-- User rows will be loaded here by admin.js -->
                            <tr><td colspan="4">цнгхЬихКаш╜╜чФицИ╖...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </section>

        <!-- User Action Modal (Hidden by default) -->
        <div id="user-action-modal" class="modal">
            <div class="modal-content">
                <span class="close-modal-btn">&times;</span>
                <h4 id="modal-username">чобчРЖчФицИ╖</h4>
                <input type="hidden" id="modal-user-id"> <!-- Store user ID -->

                <div class="form-group">
                    <label for="modal-role-select">ф┐оцФ╣шзТшЙ▓:</label>
                    <select id="modal-role-select">
                        <option value="user">user</option>
                        <option value="admin">admin</option>
                    </select>
                    <button id="modal-save-role-btn" class="modal-button save">ф┐ЭхнШшзТшЙ▓</button>
                </div>

                <hr>

                <div class="form-group">
                    <label>хИащЩдчФицИ╖:</label>
                    <button id="modal-delete-user-btn" class="modal-button delete">хИащЩдцндчФицИ╖</button>
                    <p style="font-size: 0.8em; color: #ffcdd2;">цндцУНф╜Ьф╕НхПпцТдщФАя╝Б</p>
                </div>
                 <p id="modal-message" class="message" style="display: none;"></p>
            </div>
        </div>
        <div id="modal-overlay" class="overlay"></div> <!-- Modal Overlay -->

    </main>

    <footer>
        <p>&copy; 2025 Cybar<br>made by 252</p>
    </footer>

    <script src="/js/global.js"></script> <!-- Global script for user status -->
    <script src="admin.js"></script>    <!-- Specific script for admin page -->
</body>
</html>
